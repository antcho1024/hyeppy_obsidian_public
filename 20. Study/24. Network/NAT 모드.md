VM 환경에서 주로 사용되는 네트워크 설정 중 하나.

**호스트 전용 네트워크**는 물리적인 컴퓨터(호스트)와 그 안에서 실행되는 가상 컴퓨터들(VM)만이 사용할 수 있는 네트워크
이 네트워크는 외부 네트워크(예: 인터넷)와 연결되지 않으며, 오직 호스트와 가상 컴퓨터들 간의 통신만을 허용

ex)
host 위에 vm1, vm2가 있을 때

|      | HOST | VM1 | VM2 |
| ---- | ---- | --- | --- |
| HOST |      | o   | o   |
| VM1  | o    |     | o   |
| VM2  | o    | o   |     |
| 인터넷  | o    | x   | x   |

https://co-no.tistory.com/entry/VirtualBox-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC%EC%9D%98-%EC%A2%85%EB%A5%98-%EB%B0%8F-%EA%B5%AC%EC%84%B1

https://co-no.tistory.com/2


---
gpt

VirtualBox에서 RHEL 8.1의 IP 설정을 위해 다음 단계를 따를 수 있습니다. 다만, 일부 세부 사항을 수정해야 할 수도 있습니다.

### 1. VirtualBox에서 네트워크 설정

#### 어댑터 1을 NAT 모드로 설정
NAT 모드는 VM이 인터넷에 접근할 수 있게 해줍니다. 또한, 포트 포워딩을 통해 호스트에서 VM으로 접근할 수 있습니다.

#### 포트 포워딩 설정
1. VirtualBox의 VM 설정에서 네트워크 -> 어댑터 1 -> 고급 -> 포트 포워딩을 선택합니다.
2. 포트 포워딩 규칙을 추가합니다:
   - 이름: Rule 1
   - 프로토콜: TCP
   - 호스트 IP: 공란 (빈 값으로 두세요, 127.0.0.1로 자동 설정됩니다)
   - 호스트 포트: 2222 (22 대신 다른 포트를 사용하면 충돌을 피할 수 있습니다)
   - 게스트 IP: 10.0.2.15 (NAT 네트워크에서 VM의 기본 IP)
   - 게스트 포트: 22

### 2. RHEL 8.1에서 네트워크 설정

#### 1. 네트워크 스크립트 파일 수정
`/etc/sysconfig/network-scripts/ifcfg-enp0s3` 파일을 수정하여 IP 주소를 고정 IP로 설정합니다.

```bash
sudo nano /etc/sysconfig/network-scripts/ifcfg-enp0s3
```

파일 내용은 다음과 같이 수정합니다:

```bash
TYPE=Ethernet
BOOTPROTO=static
NAME=enp0s3
DEVICE=enp0s3
ONBOOT=yes
IPADDR=10.0.2.15
NETMASK=255.255.255.0
GATEWAY=10.0.2.2
DNS1=8.8.8.8
```

- `IPADDR`는 VM의 고정 IP 주소입니다.
- `GATEWAY`는 NAT 모드의 기본 게이트웨이입니다.
- `DNS1`은 DNS 서버입니다 (여기서는 구글의 DNS를 사용).

#### 2. 네트워크 서비스 재시작

```bash
sudo systemctl restart network
```

### 3. 호스트에서 VM으로 SSH 접속

호스트에서 SSH를 통해 VM에 접속할 수 있습니다. 다음과 같이 호스트 터미널에서 실행하세요:

```bash
ssh -p 2222 사용자명@127.0.0.1
```

여기서 `사용자명`은 VM의 사용자 이름입니다.

### 추가 팁

- **NAT 네트워크 모드**: NAT 모드를 사용하는 대신 'NAT Network' 모드를 사용할 수도 있습니다. NAT 네트워크는 더 나은 네트워크 설정을 제공하며, 여러 VM이 동일한 네트워크에 있을 때 유용합니다.
- **브리지 모드**: VM이 호스트와 동일한 네트워크에 있는 것처럼 보이기를 원한다면, 브리지 모드(Bridged Adapter)를 사용할 수 있습니다.

이 단계를 따르면 RHEL 8.1 VM의 IP 설정과 호스트에서 SSH 접속이 가능해질 것입니다. 문제가 발생하면 구체적인 오류 메시지와 함께 추가 질문해 주세요.

---
VirtualBox에서 VM 네트워크 어댑터를 NAT 모드로 설정하고 포트 포워딩을 구성하는 설정에 대해 설명드리겠습니다. 

### NAT 모드
NAT(Network Address Translation) 모드는 가상 머신(VM)이 호스트 머신의 네트워크를 통해 외부 네트워크(예: 인터넷)에 접근할 수 있게 해줍니다. NAT 모드에서는 VM이 외부 네트워크와 통신할 때 호스트의 IP 주소를 사용합니다.

### 포트 포워딩
포트 포워딩은 외부 네트워크(호스트)에서 특정 포트로 들어오는 트래픽을 가상 머신(게스트)의 특정 포트로 전달하는 설정입니다.

### 설정의 의미
```plaintext
이름 : Rule 1 / 프로토콜 : TCP / 호스트 IP : 192.168.56.1 / 호스트 포트 : 22 / 게스트 IP : 10.0.2.15 / 게스트 포트 : 22
```
이 설정을 분석하면 다음과 같습니다:

1. **이름: Rule 1**:
   - 포트 포워딩 규칙의 이름입니다. 식별 목적으로 사용됩니다.

2. **프로토콜: TCP**:
   - TCP 프로토콜을 사용하여 포트 포워딩을 수행합니다.

3. **호스트 IP: 192.168.56.1**:
   - 포트 포워딩을 위해 호스트의 IP 주소를 지정합니다. 
   - 이 설정에서는 호스트 머신의 IP 주소로 `192.168.56.1`을 사용합니다. 이는 VirtualBox에서 내부 네트워크로 사용하는 IP 주소일 가능성이 큽니다.
   
4. **호스트 포트: 22**:
   - 호스트 머신의 22번 포트로 들어오는 트래픽을 가리킵니다. 
   - SSH는 기본적으로 22번 포트를 사용하므로, 이는 SSH 트래픽을 의미합니다.

5. **게스트 IP: 10.0.2.15**:
   - NAT 네트워크에서 가상 머신(게스트)의 IP 주소입니다. VirtualBox에서 기본적으로 할당하는 IP 주소입니다.

6. **게스트 포트: 22**:
   - 가상 머신(게스트)의 22번 포트로 트래픽을 전달합니다. 이 역시 SSH 트래픽을 의미합니다.

### 전체 설정의 의미
이 설정은 호스트의 IP 주소 `192.168.56.1`의 22번 포트로 들어오는 모든 TCP 트래픽을 가상 머신의 IP 주소 `10.0.2.15`의 22번 포트로 전달합니다. 이를 통해 호스트에서 가상 머신으로 SSH 연결을 설정할 수 있습니다.

### 주의사항
- **호스트 포트 22 사용**: 호스트에서 이미 SSH 서버가 22번 포트를 사용 중이라면 포트 충돌이 발생할 수 있습니다. 이런 경우 다른 호스트 포트를 사용하는 것이 좋습니다(예: 2222).
- **포트 포워딩 규칙 확인**: 호스트와 게스트의 IP 주소와 포트 번호가 정확히 설정되었는지 확인해야 합니다.

예를 들어, 포트 충돌을 피하기 위해 다음과 같이 설정할 수 있습니다:
```plaintext
이름 : Rule 1 / 프로토콜 : TCP / 호스트 IP : 공란 / 호스트 포트 : 2222 / 게스트 IP : 10.0.2.15 / 게스트 포트 : 22
```
이 설정에서는 호스트의 2222번 포트로 들어오는 트래픽을 게스트의 22번 포트로 전달하게 됩니다. 호스트에서 SSH를 통해 VM에 접속할 때는 다음과 같이 합니다:
```bash
ssh -p 2222 사용자명@127.0.0.1
```

이렇게 하면 호스트와 가상 머신 간의 네트워크 통신이 원활하게 이루어질 것입니다.


---
네, 호스트 IP는 VirtualBox를 설치한 실제 물리적 컴퓨터(즉, 당신의 Windows 컴퓨터)의 IP를 의미합니다. 그러나 포트 포워딩 설정에서 호스트 IP를 설정할 때 몇 가지 중요한 점을 이해해야 합니다.

### NAT 모드와 포트 포워딩

NAT(Network Address Translation) 모드에서 포트 포워딩을 설정하면, 외부 네트워크(예: 로컬 네트워크 또는 인터넷)에서 들어오는 특정 포트의 트래픽을 가상 머신(VM) 내부의 특정 포트로 전달할 수 있습니다. 이 설정을 통해, 호스트 컴퓨터에서 VM으로 SSH 또는 다른 서비스를 연결할 수 있습니다.

### 포트 포워딩 설정

1. **호스트 IP**: 일반적으로 포트 포워딩 규칙에서 호스트 IP를 비워두는 것이 좋습니다. 이는 모든 네트워크 인터페이스에서의 트래픽을 받아들이겠다는 의미입니다. 호스트 IP를 특정하게 설정하면, 해당 IP에서만 포트 포워딩이 적용됩니다.

2. **호스트 포트**: 호스트 머신의 포트입니다. 호스트의 특정 포트로 들어오는 트래픽을 가상 머신으로 전달할 때 사용됩니다. 예를 들어, 호스트 포트 2222로 설정하면, 호스트의 2222 포트로 들어오는 트래픽이 VM의 22번 포트로 전달됩니다.

3. **게스트 IP**: 가상 머신의 IP 주소입니다. NAT 네트워크에서 VM이 할당받은 IP 주소를 입력합니다.

4. **게스트 포트**: 가상 머신의 포트입니다. 이 포트로 호스트의 트래픽이 전달됩니다.

### 예제 설정

아래는 일반적으로 사용되는 포트 포워딩 설정입니다:

```plaintext
이름: Rule 1
프로토콜: TCP
호스트 IP: (비워둠)
호스트 포트: 2222
게스트 IP: 10.0.2.15
게스트 포트: 22
```

이 설정은 호스트의 모든 네트워크 인터페이스에서 2222 포트로 들어오는 트래픽을 가상 머신의 10.0.2.15 IP 주소의 22번 포트로 전달합니다. 즉, SSH 트래픽을 호스트의 2222 포트에서 VM의 22번 포트로 포워딩합니다.

### SSH 연결

위의 설정을 통해 호스트에서 가상 머신으로 SSH를 연결할 수 있습니다:

```bash
ssh -p 2222 사용자명@127.0.0.1
```

여기서 `사용자명`은 가상 머신의 사용자 이름입니다.

### 요약

- 호스트 IP는 일반적으로 비워두는 것이 좋습니다. 이는 모든 네트워크 인터페이스에서의 트래픽을 허용합니다.
- 호스트 포트와 게스트 포트를 적절히 설정하여 호스트에서 VM으로의 트래픽을 포워딩합니다.
- 호스트에서 VM으로 연결할 때는 포트 포워딩 규칙에 따라 적절한 포트를 사용합니다.

이렇게 설정하면 호스트에서 VM으로 SSH 연결을 할 수 있으며, 필요한 경우 다른 서비스 포트도 유사한 방식으로 설정할 수 있습니다.

---
VirtualBox에서 네트워크 설정만 하고 `/etc/sysconfig/network-scripts/ifcfg-enp0s3` 파일에서 IPADDR, NETMASK, GATEWAY, DNS1 설정을 하지 않으면 다음과 같은 일이 발생할 수 있습니다.

### 기본 동작

#### NAT 모드에서의 기본 네트워크 설정
VirtualBox의 NAT(Network Address Translation) 모드는 기본적으로 가상 머신(VM)에 자동으로 IP 주소를 할당합니다. 이는 DHCP(Dynamic Host Configuration Protocol)를 통해 이루어지며, VM은 VirtualBox가 제공하는 가상 네트워크의 IP 주소를 자동으로 받습니다.

#### 기본 IP 설정
기본적으로, NAT 모드에서 VirtualBox는 다음과 같은 네트워크 설정을 가상 머신에 할당합니다:
- IP 주소: 10.0.2.15
- 서브넷 마스크: 255.255.255.0
- 게이트웨이: 10.0.2.2
- DNS 서버: 10.0.2.3 (또는 VirtualBox가 자동으로 설정한 DNS)

이 설정들은 자동으로 적용되므로 수동으로 설정할 필요가 없습니다.

### 설정을 하지 않을 경우

#### 네트워크 연결
가상 머신이 자동으로 할당된 IP 주소와 네트워크 설정을 사용하여 인터넷에 연결할 수 있습니다. 기본적으로 DHCP를 통해 설정된 IP 주소와 게이트웨이를 사용하게 됩니다.

#### 포트 포워딩
포트 포워딩 설정은 VirtualBox에서 호스트와 가상 머신 간의 네트워크 트래픽을 처리하는 방식입니다. 호스트에서 특정 포트로 들어오는 트래픽을 가상 머신의 특정 포트로 전달하는 규칙을 설정합니다. 예를 들어:
- 호스트 IP: 192.168.56.1 (호스트의 IP 주소)
- 호스트 포트: 22 (SSH 포트)
- 게스트 IP: 10.0.2.15 (가상 머신의 IP 주소)
- 게스트 포트: 22 (가상 머신의 SSH 포트)

이 설정이 올바르게 되어 있다면, 호스트에서 가상 머신으로 SSH 연결을 시도할 때 포트 포워딩이 정상적으로 작동합니다.

### 예상 시나리오

1. **DHCP 사용 시**:
   - 가상 머신은 VirtualBox의 NAT 네트워크를 통해 자동으로 IP 주소를 할당받습니다.
   - `/etc/sysconfig/network-scripts/ifcfg-enp0s3` 파일에서 IPADDR, NETMASK, GATEWAY, DNS1 설정이 없어도 자동으로 할당된 설정을 사용하여 네트워크에 연결됩니다.

2. **수동 설정 없이 포트 포워딩만 설정 시**:
   - 가상 머신은 여전히 DHCP를 통해 IP 주소를 할당받고, NAT 네트워크를 통해 외부 네트워크(인터넷)에 접근할 수 있습니다.
   - 호스트에서 설정한 포트 포워딩 규칙에 따라, 호스트의 192.168.56.1:22로 들어오는 트래픽이 가상 머신의 10.0.2.15:22로 전달됩니다.
   - 호스트에서 `ssh -p 22 사용자명@192.168.56.1` 명령어를 통해 가상 머신에 SSH 연결을 시도할 수 있습니다.

### 요약
`/etc/sysconfig/network-scripts/ifcfg-enp0s3` 파일에서 IPADDR, NETMASK, GATEWAY, DNS1 설정을 하지 않더라도, VirtualBox의 NAT 모드와 포트 포워딩 설정이 올바르게 되어 있으면 가상 머신이 네트워크에 연결되고, 호스트에서 가상 머신으로의 포트 포워딩이 정상적으로 작동할 수 있습니다. 그러나 수동 설정을 통해 네트워크 설정을 고정하고 싶다면, 해당 파일을 수정하여 IP 주소와 네트워크 설정을 명시적으로 지정하는 것이 좋습니다.

---
